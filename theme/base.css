/*
  base.css - 共通レイアウト＆スタイル設定
  用途：目次、はじめに、おわりに、奥付 などの共通ページ用
*/
/***************************************************
  7. 段組設定：章ごとに1段 or 2段を切り替える
****************************************************/
.one-column {
  column-count: 1;
}
.two-column {
  column-count: 2;
  column-gap: 2em;
}

/***************************************************
  表紙・奥付のレイアウト
****************************************************/
.cover, .colophon {
  page: cover-page;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100vh;
  font-size: 3em;
}

@page cover-page {
  margin: 0;
  background: #f2f2f2;
}

/***************************************************
  ノンブル（ページ番号）制御
****************************************************/
@page {
  @bottom-center {
    content: counter(page);
  }
}
@page no-number {
  @bottom-center {
    content: none;
  }
}

/***************************************************
  裏表ページで異なるヘッダーを出す
****************************************************/
@page :left {
  @top-left {
    content: string(running-header);
  }
}
@page :right {
  @top-right {
    content: string(running-header);
  }
}

h2 {
  string-set: running-header content();
}

/***************************************************
  紙面サイズと余白
****************************************************/
@page {
  size: A5;
  margin: 20mm 15mm 25mm 15mm;
}

/***************************************************
  ページ背景色や画像
****************************************************/
.background-section {
  background-color: #ffe;
  background-image: url('bg.jpg');
  background-size: cover;
  background-repeat: no-repeat;
}

/***************************************************
  文字組：行長や字詰めの調整
****************************************************/
body {
  max-width: 35em;
  letter-spacing: 0.05em;
  line-height: 1.7;
}

/***************************************************
  縦書き設定（実験的）
****************************************************/
.vertical-text {
  writing-mode: vertical-rl;
  text-combine-upright: digits 2;
}

/***************************************************
  段抜き（段をまたいで表示）
****************************************************/
.break-column {
  column-span: all;
  font-weight: bold;
}

/***************************************************
  目次（自作）のデザイン
****************************************************/
nav[role="doc-toc"] {
  page-break-after: always;
  font-size: 0.9em;
}
nav[role="doc-toc"] ol {
  padding-left: 1.5em;
}

/***************************************************
 17. 改ページ制御
****************************************************/
h2 {
  page-break-before: always;
}

/***************************************************
  セクション単位でテーマ切り替え
****************************************************/
.dark-theme {
  background: #222;
  color: #fff;
  padding: 2em;
}

/***************************************************
  表・画像・コードのページ分割防止
****************************************************/
table, img, pre {
  break-inside: avoid;
}

/***************************************************
  表デザイン（罫線・背景）
****************************************************/
table {
  width: 100%;
  border-collapse: collapse;
}
th, td {
  border: 1px solid #ccc;
  padding: 0.5em;
}
thead {
  background-color: #f0f0f0;
}

/***************************************************
  画像キャプション付き（図番号対応）
****************************************************/
figure {
  break-inside: avoid;
  text-align: center;
}
figcaption::before {
  content: "図 " counter(fig) ": ";
  counter-increment: fig;
}
figcaption {
  font-size: 0.8em;
  margin-top: 0.5em;
}

/***************************************************
  数式表示（KaTeXなど）
****************************************************/
.math {
  font-family: 'KaTeX_Main', serif;
  font-style: italic;
  white-space: nowrap;
}

/***************************************************
  図表・脚注の連番設定（例）
****************************************************/
body {
  counter-reset: fig table footnote;
}
figcaption::before {
  counter-increment: fig;
  content: "図" counter(fig) ": ";
}
table caption::before {
  counter-increment: table;
  content: "表" counter(table) ": ";
}
.footnote::before {
  counter-increment: footnote;
  content: "[" counter(footnote) "]";
}

/***************************************************
  コードブロック（Prism.js対応など）
****************************************************/
pre[class*="language-"] {
  background: #f5f2f0;
  padding: 1em;
  border-radius: 5px;
  overflow: auto;
}

code[class*="language-"] {
  color: #c7254e;
  font-family: Consolas, Monaco, 'Andale Mono', monospace;
}

.token.comment {
  color: #999;
}
.token.keyword {
  color: #07a;
}
.token.string {
  color: #690;
}
